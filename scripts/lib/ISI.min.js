"use strict";function ISI(t){ISI.version="2.0.18",console.log("new ISI() v. "+ISI.version+("undefined"!=typeof isiID?" "+isiID.toUpperCase()+"_"+isiVer:""));var i,o,n,s,a,l,r,d,u,e=new ISIText,c={},p=e.type||"time",v=e.time||15,h=e.delay||0,y=e.stopType||"overlay",m=e.stopText||"",f=e.speed,T=e.maxTime,g=e.body,S=e.header,I=e.footer,E=e.css,C=e.holderCSS,w=e.vars,L=5,O="building",_=!1,x=!1,B="none",A=new Array,R=!1;this.getShowHide=function(){return c},this.getType=function(){return p},this.setType=function(e){p=e},this.getTime=function(){return v},this.setTime=function(e){v=e},this.getDelay=function(){return h},this.setDelay=function(e){h=e},this.getStopType=function(){return y},this.setStopType=function(e){y=e},this.getSpeed=function(){return f},this.setSpeed=function(e){f=e},this.getMaxTime=function(){return T},this.setMaxTime=function(e){T=e},this.getInterrupted=function(){return x},this.setInterrupted=function(e){B="interrupted set to "+(x=e)+" by code"},this.showOverlay=function(){"overlay"==y&&q(!1)},this.hideOverlay=function(){"overlay"==y&&q(!0)},this.var=function(e){return w[e]},E+=".isiHolder {opacity:0;display:flex;flex-direction:column;position:absolute;box-sizing: border-box;"+C+"}",E+="#isiHolder div {opacity:1; position:relative;}",E+=".isiBody {flex:1;overflow-x: hidden;overflow-y: auto;}",E+=".stopText {box-sizing: border-box !important;"+("overlay"==y?"position:absolute !important;":"position:relative;")+"width:100%;height:auto;}",E+=".stopTag {height:auto;width:100%;}";var b,H,e=document.createElement("style");e.type="text/css",e.innerHTML=E,document.getElementsByTagName("head")[0].appendChild(e),isiHolder.className="isiHolder",0==isiHolder.hasChildNodes()&&(S&&((b=document.createElement("div")).id="isiHeader",b.className="isiHeader",b.innerHTML=S,isiHolder.appendChild(b)),(b=document.createElement("div")).id="isiBody",b.className="isiBody",b.innerHTML=g,isiHolder.appendChild(b),I&&((b=document.createElement("div")).id="isiFooter",b.className="isiFooter",b.innerHTML=I,isiHolder.appendChild(b))),function(){for(var e in t)null==getElem(e)==1?c[e]=t[e]:getElem(e).innerHTML=t[e]}(),U(),k(),function(){if(isiBody.addEventListener("click",N),isiBody.addEventListener("mousedown",N),isiBody.addEventListener("wheel",N),isiBody.addEventListener("touchmove",N),isiBody.addEventListener("scroll",P),"undefined"!=typeof exitHandler)for(var e=[],t=isiHolder.getElementsByTagName("a"),i=0;i<t.length;i++)e.push(t[i].id),0<=t[i].href.indexOf("foo()")&&getElem(e[i]).addEventListener("click",exitHandler);l=O,O="ready",new CustomEvent("ISI_READY",{detail:{state:O,previousState:l}})}(),this.resize=function(e,t){t=t||0;B="isi expanded",D(),q(!0),gsap.set(isiBody,{scrollTo:{y:0}});var i,o={duration:t,onStart:function(){l=O,O="resizing",new CustomEvent("ISI_RESIZE_START",{detail:{state:O,previousState:l}})},onComplete:function(){x=!1,l=O,O="idle",new CustomEvent("ISI_RESIZE_COMPLETE",{detail:{state:O,previousState:l}}),k(),U()}};for(i in e)o[i]=e[i];gsap.to(isiHolder,o)},this.startAutoscroll=function(){var e;!0===_&&(_=!1),0==x?(l=O,O="autoscroll_pending",new CustomEvent("ISI_CALL_START_AUTOSCROLL",{detail:{delay:h,duration:v,state:O,previousState:l}}),k(),"speed"==p&&(e="max"==i?isiBody.scrollHeight:i,v=e/f,0<T&&(d=setTimeout(function(){"max"!=i&&q(!1),l=O,O="idle",new CustomEvent("ISI_AUTOSCROLL_TIMEOUT",{detail:{delay:h,duration:v,state:O,previousState:l}}),D()},1e3*T))),r=gsap.to(isiBody,{delay:h,duration:v,onComplete:z,scrollTo:{y:i,autoKill:!0,onAutoKill:F},ease:"none",onStart:function(){l=O,O="autoscrolling",new CustomEvent("ISI_START_AUTOSCROLL",{detail:{delay:h,duration:v,state:O,previousState:l}})}})):(l=O,O="idle",new CustomEvent("ISI_AUTOSCROLL_ABORTED",{detail:{state:O,previousState:l,cause:B}}))},this.goToTop=function(e,t){var i=e||0,o=t||0;gsap.to(isiBody,{delay:i,duration:o,onComplete:function(){l=O,O="idle",new CustomEvent("ISI_COMPLETE_GO_TO_TOP",{detail:{delay:i,duration:o,state:O,previousState:l}})},scrollTo:{y:0,autoKill:!0,onAutoKill:F},ease:Power0.easeNone,onStart:function(){l=O,O="going to top",new CustomEvent("ISI_START_GO_TO_TOP",{detail:{delay:i,duration:o,state:O,previousState:l}})}})},this.killAutoscroll=function(){D()},this.reset=function(){gsap.killTweensOf(isiBody),_=!0,x=!(O="reset"),this.goToTop(),q(!0)};try{panelState,H=w.CollapsedPanelCollapsedISI}catch(e){H=w.CollapsedISI}function N(e){0==R&&(eventCount("manual isi scroll",!0),"idle"!=O?(x=!0,B="autoscrolling"==O?"touched by pointer or finger while autoscrolling":"autoscroll_pending"==O?"touched by pointer or finger during start autoscroll delay":"unknown",l=O,O="idle",new CustomEvent("ISI_AUTOSCROLL_INTERRUPTED",{detail:{state:O,previousState:l,cause:B}})):(B="touched by pointer or finger before autoscroll start",q(!0),new CustomEvent("ISI_AUTOSCROLL_ABORTED",{detail:{state:O,previousState:l,cause:B}})),D()),R=!0,clearTimeout(u),u=setTimeout(M,250)}function M(){R=!1}function U(){var e=document.querySelectorAll("span[type=cuepoint]");A=[];for(var t=0;t<e.length;t++)A.push(e[t])}function P(){for(var e=A.length,t=0;t<e;t++){var i=A[t].getBoundingClientRect();if(i.top>=s.top&&i.bottom<=s.bottom){new CustomEvent("ISI_CUEPOINT",{detail:{id:A[0].id}}),A.shift();break}}e<=0&&isiBody.removeEventListener("scroll",P)}function k(){s=isiBody.getBoundingClientRect(),function(){{var e;o=document.querySelectorAll("span[type=stop]")[0],null==getElem("stopText")&&("inline"==y?((e=document.createElement("p")).id="stopText",e.innerHTML=m,e.className="stopText",o.appendChild(e)):"overlay"==y&&(s=isiBody.getBoundingClientRect(),(n=document.createElement("div")).id="stopText",n.innerHTML=m,n.className="stopText",isiHolder.appendChild(n)))}if("inline"!=y&&"overlay"==y){var t;try{t=document.getElementById("isiFooter").offsetHeight}catch(e){t=0}gsap.set(n,{width:parseInt(s.width-function(){var e=document.createElement("div");e.id="isiBody",e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);i=i.offsetWidth;return e.parentNode.removeChild(e),t-i}()),autoAlpha:0,bottom:t})}}(),function(){{var e;o?(o.style.display="block",gsap.set(o,{display:"inlineBlock"}),o.className="stopTag",a=o.getBoundingClientRect(),e=n?n.getBoundingClientRect():{height:0},i=parseInt(a.top-s.top-s.height+a.height+e.height+L),a.top<s.height&&(o.style.display="none",x=!0,B="stop point already in viewing portal",l=O,O="idle",new CustomEvent("ISI_STOPPOINT_INVALID",{detail:{state:O,previousState:l,cause:B}}))):(i="max",y="bottom")}}()}function D(){x=!0,r&&r.kill(),r=void 0}function z(){"max"!=i&&q(!1),l=O,O="idle",new CustomEvent("ISI_AUTOSCROLL_COMPLETE",{detail:{state:O,previousState:l}}),K()}function K(){clearInterval(d)}function F(e){K(),x=!0,B="user touched ISI while autoscrolling",l=O,O="idle",new CustomEvent("ISI_AUTOSCROLL_INTERRUPTED",{detail:{state:O,previousState:l,cause:B}})}function q(e){"inline"==y?gsap.set(o,{display:1==e?"none":"block"}):"overlay"==y&&gsap.to(n,{duration:1,autoAlpha:1==e?0:1})}C||this.resize(H)}